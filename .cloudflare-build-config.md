# Cloudflare Build Configuration

This file documents the build configuration settings for Cloudflare Pages deployment.

## Cloudflare Dashboard Settings

When configuring your project in Cloudflare Dashboard, use these settings:

### Build Settings
- **Build command**: `npm run build`
- **Deploy command**: `npx wrangler pages deploy out --project-name=nexenova-studios --compatibility-date=2024-01-01`
  - ⚠️ **Required**: Cloudflare UI requires a deploy command
  - Cloudflare's build environment should have authentication configured automatically
  - If you get auth errors, check Cloudflare Pages → Settings → Environment variables
- **Non-production branch deploy command**: `npx wrangler pages deploy out --project-name=nexenova-studios --branch=$CF_PAGES_BRANCH`
- **Build output directory**: `out`
- **Root directory**: `/` (leave empty)
- **Node.js version**: 18 or higher

### ⚠️ Important: Authentication Setup
If you see authentication errors:
1. Go to Cloudflare Dashboard → Your Pages Project → Settings → Environment variables
2. Ensure `CLOUDFLARE_API_TOKEN` is NOT set (Cloudflare handles auth automatically for Git deployments)
3. If the error persists, you may need to reconnect your Git integration
4. Cloudflare's build environment should authenticate wrangler automatically for Git-based deployments

### Framework Preset
- **Framework preset**: Next.js (Static HTML Export)

## Important Notes

1. **Git-based Deployment**: If you're connecting via Git, you can leave the deploy commands empty. Cloudflare will automatically build and deploy on every push.

2. **Manual Deployment**: If you want to deploy manually via CLI, use:
   ```bash
   npm run deploy
   ```

3. **Preview Deployments**: For preview/non-production branches, Cloudflare automatically creates preview deployments. The deploy command for non-production branches is optional.

## Environment Variables

Add environment variables in Cloudflare Dashboard → Settings → Environment variables:
- `NODE_ENV=production` (optional, Cloudflare sets this automatically)

## Verification

After deployment, verify:
- Site is accessible at your Cloudflare Pages URL
- All routes are working correctly
- Static assets are loading properly
- Check build logs in Cloudflare Dashboard for any errors
